#!/usr/bin/env node
'use strict';

try {
  function isNodeLT(v) {
    var check = v.split('.').map(Number);
    var node = process.versions.node.split('.').map(Number);
    return node[0] < check[0] || (node[0] === check[0] && node[1] < check[1]);
  }

  if (isNodeLT('10.13')) {
    console.error(
      '\nYour current version of Node is ' +
        process.version +
        ', however Stencil requires v10.13.0 or greater. It is recommended to install latest version of Node (https://github.com/nodejs/Release).\n',
    );
    process.exit(1);
  }

  if (isNodeLT('12.17')) {
    console.warn(
      '\nYour current version of Node is ' +
        process.version +
        ', however the recommendation is a minimum of Node LTS (https://github.com/nodejs/Release). Note that future versions of Stencil will eventually remove support for non-LTS Node versions.\n',
    );
  }
} catch (e) {}

if (process.argv.indexOf('--next') > -1) {
  console.warn('\nThe next compiler is now the default and the --next flag is no longer needed.\n');
}

var cli = require('../cli/node/index.js');
cli.run({
  process: process,
  logger: cli.createNodeLogger(process),
  sys: cli.createNodeSystem(process),
});
